(()=>{"use strict";let e=JSON.parse(localStorage.getItem("projects"))||[],t=JSON.parse(localStorage.getItem("notes"))||[],n=e[0];function s(e,t,n=!1){return this.title=e,this.description=t,this.isActive=n,this.tasks=[],this}function l(e,t,n,s="low",l=!1,d){this.title=e,this.dueDate=t,this.dueTime=n,this.priority=s,this.checked=l,this.belongs=d}function d(e,n){this.title=e,this.description=n,this.id=t.length}0===e.length&&function(){let t=new s("Today","Tasks for the day",!0),l=new s("Week","Tasks for the week",!1);e.push(t),e.push(l),n=e[0]}();let o=document.getElementById("title"),i=document.getElementById("newnotecard"),a=document.getElementById("newprojectcard"),c=document.getElementById("newtaskcard"),r=document.getElementById("modal"),m=document.getElementById("maincontainer"),p=document.createElement("img");function u(){"Notes"===n?localStorage.setItem("notes",JSON.stringify(t)):localStorage.setItem("projects",JSON.stringify(e))}function g(){r.style.display="flex",a.style.display="flex"}function y(){n===e[0]&&(document.getElementById("dueDcontainer").style.display="none"),r.style.display="flex",c.style.display="flex"}function h(){r.style.display="none",c.style.display="none"}function k(e){r.style.display="none",a.style.display="none"}function E(){r.style.display="none",i.style.display="none"}p.src="images/plus-frame-svgrepo-com.svg",p.id="newtaskicon";const v=()=>{let t=new s(document.getElementById("projecttitle").value,document.getElementById("projectdescription").value,!1);e.push(t),u(),console.log("projectsArr1: "+e),o.textContent="Projects",n=void 0,k(),I()},f=()=>{let e=new l(document.getElementById("tasktitle").value,document.getElementById("duedate").value,document.getElementById("duetime").value,document.getElementById("priority").value,!1,n.title);n.tasks.push(e),u(),console.log(n.title),h(),L()},C=()=>{let e=new d(document.getElementById("notetitle").value,document.getElementById("notedescription").value);"Notes"===n&&(t.push(e),u(),E(),x())};function x(){m.innerHTML="",m.style.display="flex",m.style.flexDirection="row",m.style.flexWrap="wrap",console.log("displayin notes...");for(let e=0;e<t.length;e++){console.log("disp notes loop");let n=document.createElement("div");n.classList.add("notecard");let s=document.createElement("h3");s.textContent=t[e].title;let l=document.createElement("p");l.textContent=t[e].description;let d=document.createElement("img");d.src="images/bin-cancel-delete-remove-trash-garbage-svgrepo-com.svg",d.classList.add("icon"),d.style.position="absolute",d.style.bottom="10px",d.style.right="10px",m.appendChild(n),n.appendChild(s),n.appendChild(l),n.appendChild(d),d.addEventListener("click",(()=>{t.splice(e,1),u(),x()}))}}function I(){console.log("projectsArr: "+e),m.style.display="grid",m.style.gridColumn="1fr 1fr 1fr 1fr",m.style.gridTemplateRows="repeat(auto-fit, minmax(200px, 1fr))",m.innerHTML="",n=void 0;for(let t=2;t<e.length;t++){e[t].id=t;let s=e[t].id;console.log("project id:"+s);let l=document.createElement("div");l.classList.add("projectcard");let d=document.createElement("h3");d.textContent=e[t].title;let o=document.createElement("p"),i=document.createElement("p"),a=0;for(let n=0;n<e[t].tasks.length;n++)e[t].tasks[n].checked||a++;i.textContent="Due tasks: "+a,o.textContent=e[t].description;let c=document.createElement("img");c.style.position="absolute",c.style.bottom="55px",c.style.right="10px",c.src="images/bin-cancel-delete-remove-trash-garbage-svgrepo-com.svg",c.classList.add("icon"),l.appendChild(d),l.appendChild(o),l.appendChild(i),l.appendChild(c),m.appendChild(l),l.addEventListener("click",(t=>{document.getElementById("maincontainer").innerHTML="";const l=document.getElementById("title");l.textContent=e[s].title,l.appendChild(p),n=e[s],console.log(n),L()})),c.addEventListener("click",(n=>{n.stopPropagation(),window.confirm("Are you sure you want to delete this project? You will lose all your tasks")&&(e.splice(t,1),I(),u())}))}}function L(){if(void 0!==n&&"Notes"!==n){m.style.display="flex",m.innerHTML="",console.log("current proj"+n+n.title);for(let e=0;e<n.tasks.length;e++){n.tasks[e];let t=document.createElement("div");switch(t.classList.add("tasks"),n.tasks[e].priority){case"low":t.style.backgroundColor="rgba(178, 255, 165, 0.831)";break;case"medium":t.style.backgroundColor="rgba(255, 207, 103, 0.831)";break;case"high":t.style.backgroundColor="rgba(255, 165, 165, 0.872)"}let s=document.createElement("div");s.classList.add("tasktitle");let l=document.createElement("span"),d=document.createElement("img");d.src="images/square-regular.svg",d.classList.add("icon"),l.textContent=n.tasks[e].title;let o=document.createElement("div");o.classList.add("taskicons");let i=document.createElement("span");i.textContent="due: "+n.tasks[e].dueDate+" "+n.tasks[e].dueTime;let a=document.createElement("img");a.src="images/edit-svgrepo-com.svg",a.classList.add("icon");let c=document.createElement("img");c.src="images/bin-cancel-delete-remove-trash-garbage-svgrepo-com.svg",c.classList.add("icon"),m.appendChild(t),t.appendChild(s),s.appendChild(d),s.appendChild(l),t.appendChild(o),o.appendChild(i),o.appendChild(a),o.appendChild(c),!0===n.tasks[e].checked&&(l.style.textDecoration="line-through",d.src="images/square-check-regular.svg",d.style.filter="invert(100%) sepia(0%) saturate(1%) hue-rotate(298deg) brightness(108%) contrast(101%)",c.style.filter="invert(100%) sepia(0%) saturate(1%) hue-rotate(298deg) brightness(108%) contrast(101%)",a.style.filter="invert(100%) sepia(0%) saturate(1%) hue-rotate(298deg) brightness(108%) contrast(101%)",n.tasks[e].isActive=!1,t.style.backgroundColor="black",t.style.color="white"),c.addEventListener("click",(()=>{n.tasks.splice(e,1),L(),u()})),a.addEventListener("click",(()=>{n.tasks.splice(e,1),y()})),d.addEventListener("click",(()=>{!1===n.tasks[e].checked?n.tasks[e].checked=!0:n.tasks[e].checked=!1,u(),L()}))}}}e.length>=2&&"Projects"===o&&I(),n=e[0],function(){o.appendChild(p);let t=document.getElementById("xmarkproj"),s=document.getElementById("xmarktask"),l=document.getElementById("xmarknote"),d=document.querySelectorAll(".navlink"),a=document.getElementById("addproject"),c=document.getElementById("addtask"),m=document.getElementById("addnote"),u=document.getElementById("newproject"),B=(document.getElementById("newtaskicon"),document.getElementById("projectslink"));a.addEventListener("click",v),c.addEventListener("click",f),m.addEventListener("click",C),u.addEventListener("click",g),p.addEventListener("click",(()=>{"Notes"===n?(r.style.display="flex",i.style.display="flex"):y()})),d.forEach((function(t){t.addEventListener("click",(t=>{o.textContent=t.target.textContent,"Today"===t.target.textContent?(n=e[0],o.appendChild(p)):"Week"===t.target.textContent?(n=e[1],o.appendChild(p)):"Projects"===t.target.textContent||"Notes"===t.target.textContent&&(n="Notes",o.appendChild(p),x()),L()}))})),B.addEventListener("click",I),t.addEventListener("click",k),s.addEventListener("click",h),l.addEventListener("click",E)}(),L()})();