(()=>{"use strict";let e=JSON.parse(localStorage.getItem("projects"))||[],t=JSON.parse(localStorage.getItem("notes"))||[],n=e[0];function s(e,t,n=!1){return this.title=e,this.description=t,this.isActive=n,this.tasks=[],this}function d(e,t,n,s,d="low",o=!1,l){this.title=e,this.description=t,this.dueDate=n,this.dueTime=s,this.priority=d,this.checked=o,this.belongs=l}function o(e,n){this.title=e,this.description=n,this.id=t.length}0===e.length&&function(){let t=new s("Today","Tasks for the day",!0),d=new s("Week","Tasks for the week",!1);e.push(t),e.push(d),n=e[0]}();const l=document.getElementById("title"),c=document.getElementById("newnotecard"),i=document.getElementById("newprojectcard"),a=document.getElementById("newtaskcard"),r=document.getElementById("modal"),m=document.getElementById("maincontainer"),u=document.querySelector(".navbar");let p=!1,g=!1;const y=document.createElement("img");function k(){"Notes"===n?localStorage.setItem("notes",JSON.stringify(t)):localStorage.setItem("projects",JSON.stringify(e))}function v(){g&&(u.classList.remove("active"),g=!1)}function E(){g?g&&(console.log("hola"),u.classList.remove("active")):u.classList.add("active"),g=!g}function h(){r.style.display="flex",i.style.display="flex"}function f(){n===e[0]?document.getElementById("dueDcontainer").style.display="none":document.getElementById("dueDcontainer").style.display="block",r.style.display="flex",a.style.display="flex",p||(document.getElementById("tasktitle").value="",document.getElementById("taskdescription").value="",document.getElementById("duedate").value="",document.getElementById("duetime").value="",document.getElementById("priority").value="")}function I(){r.style.display="none",a.style.display="none",p&&(p=!1,x())}function C(e){r.style.display="none",i.style.display="none"}function B(){r.style.display="none",c.style.display="none"}y.src="images/plus-frame-svgrepo-com.svg",y.id="newtaskicon";const L=()=>{const t=new s(document.getElementById("projecttitle").value,document.getElementById("projectdescription").value,!1);e.push(t),k(),console.log("projectsArr1: "+e),l.textContent="Projects",n=void 0,C(),j()},x=()=>{p&&(p=!1);const e=new d(document.getElementById("tasktitle").value,document.getElementById("taskdescription").value,document.getElementById("duedate").value,document.getElementById("duetime").value,document.getElementById("priority").value,!1,n.title);n.tasks.push(e),k(),console.log(n.title),I(),T()},b=()=>{const e=new o(document.getElementById("notetitle").value,document.getElementById("notedescription").value);"Notes"===n&&(t.push(e),k(),B(),w())};function w(){m.innerHTML="",m.style.display="flex",m.style.flexDirection="row",m.style.flexWrap="wrap",console.log("displayin notes...");for(const e=0;e<t.length;e++){console.log("disp notes loop");const n=document.createElement("div");n.classList.add("notecard");const s=document.createElement("h3");s.textContent=t[e].title;const d=document.createElement("p");d.textContent=t[e].description;const o=document.createElement("img");o.src="images/bin-cancel-delete-remove-trash-garbage-svgrepo-com.svg",o.classList.add("icon"),o.style.position="absolute",o.style.bottom="10px",o.style.right="10px",m.appendChild(n),n.appendChild(s),n.appendChild(d),n.appendChild(o),o.addEventListener("click",(()=>{t.splice(e,1),k(),w()}))}}function j(){console.log("projectsArr: "+e),m.style.display="grid",m.style.gridColumn="1fr 1fr 1fr 1fr",m.style.gridTemplateRows="repeat(auto-fit, minmax(200px, 1fr))",m.innerHTML="",n=void 0;for(const t=2;t<e.length;t++){e[t].id=t;const s=e[t].id;console.log("project id:"+s);const d=document.createElement("div");d.classList.add("projectcard");const o=document.createElement("h3");o.textContent=e[t].title;const l=document.createElement("p"),c=document.createElement("p"),i=0;for(const n=0;n<e[t].tasks.length;n++)e[t].tasks[n].checked||i++;c.textContent="Due tasks: "+i,l.textContent=e[t].description;const a=document.createElement("img");a.style.position="absolute",a.style.bottom="55px",a.style.right="10px",a.src="images/bin-cancel-delete-remove-trash-garbage-svgrepo-com.svg",a.classList.add("icon"),d.appendChild(o),d.appendChild(l),d.appendChild(c),d.appendChild(a),m.appendChild(d),d.addEventListener("click",(t=>{document.getElementById("maincontainer").innerHTML="";const d=document.getElementById("title");d.textContent=e[s].title,d.appendChild(y),n=e[s],console.log(n),T()})),a.addEventListener("click",(n=>{n.stopPropagation(),window.confirm("Are you sure you want to delete this project? You will lose all your tasks")&&(e.splice(t,1),j(),k())}))}}function T(){if(void 0!==n&&"Notes"!==n){m.style.display="flex",m.innerHTML="",console.log("current proj"+n+n.title);for(let e=0;e<n.tasks.length;e++){n.tasks[e];const t=document.createElement("div");switch(t.classList.add("tasks"),n.tasks[e].priority){case"low":t.style.backgroundColor="rgba(178, 255, 165, 0.831)";break;case"medium":t.style.backgroundColor="rgba(255, 207, 103, 0.831)";break;case"high":t.style.backgroundColor="rgba(255, 165, 165, 0.872)"}const s=document.createElement("div");s.classList.add("tasktitle");const d=document.createElement("span"),o=document.createElement("img");o.src="images/square-regular.svg",o.classList.add("icon");const l=document.createElement("img");l.src="images/eye-regular.svg",l.classList.add("icon"),d.textContent=n.tasks[e].title;const c=document.createElement("div");c.classList.add("taskicons");const i=document.createElement("span");i.textContent="due: "+n.tasks[e].dueDate+" "+n.tasks[e].dueTime;const a=document.createElement("img");a.src="images/edit-svgrepo-com.svg",a.classList.add("icon");const r=document.createElement("img");r.src="images/bin-cancel-delete-remove-trash-garbage-svgrepo-com.svg",r.classList.add("icon"),m.appendChild(t),t.appendChild(s),s.appendChild(o),s.appendChild(d),t.appendChild(c),(n.tasks[e].dueDate||n.tasks[e].dueTime)&&c.appendChild(i),c.appendChild(l),c.appendChild(a),c.appendChild(r),!0===n.tasks[e].checked&&(d.style.textDecoration="line-through",o.src="images/square-check-regular.svg",o.style.filter="invert(100%) sepia(0%) saturate(1%) hue-rotate(298deg) brightness(108%) contrast(101%)",r.style.filter="invert(100%) sepia(0%) saturate(1%) hue-rotate(298deg) brightness(108%) contrast(101%)",a.style.filter="invert(100%) sepia(0%) saturate(1%) hue-rotate(298deg) brightness(108%) contrast(101%)",n.tasks[e].isActive=!1,t.style.backgroundColor="black",t.style.color="white"),l.addEventListener("click",(()=>{const t=document.getElementById("modal");t.style.display="flex";const s=document.createElement("div");s.classList.add("taskdescriptiondiv"),n.tasks[e].description?s.textContent=n.tasks[e].description:s.textContent="You don't have a description yet",t.appendChild(s),t.addEventListener("click",(()=>{t.removeChild(s),t.style.display="none"}))})),r.addEventListener("click",(()=>{n.tasks.splice(e,1),T(),k()})),a.addEventListener("click",(()=>{p=!0,document.getElementById("tasktitle").value=n.tasks[e].title,document.getElementById("taskdescription").value=n.tasks[e].description,document.getElementById("duedate").value=n.tasks[e].dueDate,document.getElementById("duetime").value=n.tasks[e].dueTime,document.getElementById("priority").value=n.tasks[e].priority,n.tasks.splice(e,1),f()})),o.addEventListener("click",(()=>{!1===n.tasks[e].checked?n.tasks[e].checked=!0:n.tasks[e].checked=!1,k(),T()}))}}}e.length>=2&&"Projects"===l&&j(),n=e[0],function(){l.appendChild(y);const t=document.getElementById("content"),s=document.getElementById("hamburgericon"),d=document.getElementById("xmarkproj"),o=document.getElementById("xmarktask"),i=document.getElementById("xmarknote"),a=document.querySelectorAll(".navlink"),m=document.getElementById("addproject"),u=document.getElementById("addtask"),p=document.getElementById("addnote"),g=document.getElementById("newproject"),k=document.getElementById("projectslink");t.addEventListener("click",v),s.addEventListener("click",E),m.addEventListener("click",L),u.addEventListener("click",x),p.addEventListener("click",b),g.addEventListener("click",h),y.addEventListener("click",(()=>{"Notes"===n?(r.style.display="flex",c.style.display="flex"):(document.getElementById("tasktitle").value="",document.getElementById("taskdescription").value="",document.getElementById("duedate").value="",document.getElementById("duetime").value="",document.getElementById("priority").value="",f())})),a.forEach((function(t){t.addEventListener("click",(t=>{l.textContent=t.target.textContent,document.querySelector(".navbar").classList.remove("active"),"Today"===t.target.textContent?(n=e[0],l.appendChild(y)):"Week"===t.target.textContent?(n=e[1],l.appendChild(y)):"Projects"===t.target.textContent||"Notes"===t.target.textContent&&(n="Notes",l.appendChild(y),w()),T()}))})),k.addEventListener("click",j),d.addEventListener("click",C),o.addEventListener("click",I),i.addEventListener("click",B)}(),T()})();