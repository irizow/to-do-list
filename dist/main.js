(()=>{"use strict";let e=JSON.parse(localStorage.getItem("projects"))||[],t=JSON.parse(localStorage.getItem("notes"))||[],n=e[0];function l(e,t,n=!1){return this.title=e,this.description=t,this.isActive=n,this.tasks=[],this}function s(e,t,n,l,s="low",d=!1,i){this.title=e,this.description=t,this.dueDate=n,this.dueTime=l,this.priority=s,this.checked=d,this.belongs=i}function d(e,n){this.title=e,this.description=n,this.id=t.length}0===e.length&&function(){let t=new l("Today","Tasks for the day",!0),s=new l("Week","Tasks for the week",!1);e.push(t),e.push(s),n=e[0]}();let i=document.getElementById("title"),a=document.getElementById("newnotecard"),o=document.getElementById("newprojectcard"),c=document.getElementById("newtaskcard"),r=document.getElementById("modal"),m=document.getElementById("maincontainer"),u=!1,p=document.createElement("img");function g(){"Notes"===n?localStorage.setItem("notes",JSON.stringify(t)):localStorage.setItem("projects",JSON.stringify(e))}function y(){r.style.display="flex",o.style.display="flex"}function k(){n===e[0]?document.getElementById("dueDcontainer").style.display="none":document.getElementById("dueDcontainer").style.display="block",r.style.display="flex",c.style.display="flex",u||(document.getElementById("tasktitle").value="",document.getElementById("taskdescription").value="",document.getElementById("duedate").value="",document.getElementById("duetime").value="",document.getElementById("priority").value="")}function h(){r.style.display="none",c.style.display="none",u&&(u=!1,f())}function E(e){r.style.display="none",o.style.display="none"}function v(){r.style.display="none",a.style.display="none"}p.src="images/plus-frame-svgrepo-com.svg",p.id="newtaskicon";const I=()=>{let t=new l(document.getElementById("projecttitle").value,document.getElementById("projectdescription").value,!1);e.push(t),g(),console.log("projectsArr1: "+e),i.textContent="Projects",n=void 0,E(),x()},f=()=>{u&&(u=!1);let e=new s(document.getElementById("tasktitle").value,document.getElementById("taskdescription").value,document.getElementById("duedate").value,document.getElementById("duetime").value,document.getElementById("priority").value,!1,n.title);n.tasks.push(e),g(),console.log(n.title),h(),L()},C=()=>{let e=new d(document.getElementById("notetitle").value,document.getElementById("notedescription").value);"Notes"===n&&(t.push(e),g(),v(),B())};function B(){m.innerHTML="",m.style.display="flex",m.style.flexDirection="row",m.style.flexWrap="wrap",console.log("displayin notes...");for(let e=0;e<t.length;e++){console.log("disp notes loop");let n=document.createElement("div");n.classList.add("notecard");let l=document.createElement("h3");l.textContent=t[e].title;let s=document.createElement("p");s.textContent=t[e].description;let d=document.createElement("img");d.src="images/bin-cancel-delete-remove-trash-garbage-svgrepo-com.svg",d.classList.add("icon"),d.style.position="absolute",d.style.bottom="10px",d.style.right="10px",m.appendChild(n),n.appendChild(l),n.appendChild(s),n.appendChild(d),d.addEventListener("click",(()=>{t.splice(e,1),g(),B()}))}}function x(){console.log("projectsArr: "+e),m.style.display="grid",m.style.gridColumn="1fr 1fr 1fr 1fr",m.style.gridTemplateRows="repeat(auto-fit, minmax(200px, 1fr))",m.innerHTML="",n=void 0;for(let t=2;t<e.length;t++){e[t].id=t;let l=e[t].id;console.log("project id:"+l);let s=document.createElement("div");s.classList.add("projectcard");let d=document.createElement("h3");d.textContent=e[t].title;let i=document.createElement("p"),a=document.createElement("p"),o=0;for(let n=0;n<e[t].tasks.length;n++)e[t].tasks[n].checked||o++;a.textContent="Due tasks: "+o,i.textContent=e[t].description;let c=document.createElement("img");c.style.position="absolute",c.style.bottom="55px",c.style.right="10px",c.src="images/bin-cancel-delete-remove-trash-garbage-svgrepo-com.svg",c.classList.add("icon"),s.appendChild(d),s.appendChild(i),s.appendChild(a),s.appendChild(c),m.appendChild(s),s.addEventListener("click",(t=>{document.getElementById("maincontainer").innerHTML="";const s=document.getElementById("title");s.textContent=e[l].title,s.appendChild(p),n=e[l],console.log(n),L()})),c.addEventListener("click",(n=>{n.stopPropagation(),window.confirm("Are you sure you want to delete this project? You will lose all your tasks")&&(e.splice(t,1),x(),g())}))}}function L(){if(void 0!==n&&"Notes"!==n){m.style.display="flex",m.innerHTML="",console.log("current proj"+n+n.title);for(let e=0;e<n.tasks.length;e++){n.tasks[e];let t=document.createElement("div");switch(t.classList.add("tasks"),n.tasks[e].priority){case"low":t.style.backgroundColor="rgba(178, 255, 165, 0.831)";break;case"medium":t.style.backgroundColor="rgba(255, 207, 103, 0.831)";break;case"high":t.style.backgroundColor="rgba(255, 165, 165, 0.872)"}let l=document.createElement("div");l.classList.add("tasktitle");let s=document.createElement("span"),d=document.createElement("img");d.src="images/square-regular.svg",d.classList.add("icon");let i=document.createElement("img");i.src="images/eye-regular.svg",i.classList.add("icon"),s.textContent=n.tasks[e].title;let a=document.createElement("div");a.classList.add("taskicons");let o=document.createElement("span");o.textContent="due: "+n.tasks[e].dueDate+" "+n.tasks[e].dueTime;let c=document.createElement("img");c.src="images/edit-svgrepo-com.svg",c.classList.add("icon");let r=document.createElement("img");r.src="images/bin-cancel-delete-remove-trash-garbage-svgrepo-com.svg",r.classList.add("icon"),m.appendChild(t),t.appendChild(l),l.appendChild(d),l.appendChild(s),t.appendChild(a),(n.tasks[e].dueDate||n.tasks[e].dueTime)&&a.appendChild(o),a.appendChild(i),a.appendChild(c),a.appendChild(r),!0===n.tasks[e].checked&&(s.style.textDecoration="line-through",d.src="images/square-check-regular.svg",d.style.filter="invert(100%) sepia(0%) saturate(1%) hue-rotate(298deg) brightness(108%) contrast(101%)",r.style.filter="invert(100%) sepia(0%) saturate(1%) hue-rotate(298deg) brightness(108%) contrast(101%)",c.style.filter="invert(100%) sepia(0%) saturate(1%) hue-rotate(298deg) brightness(108%) contrast(101%)",n.tasks[e].isActive=!1,t.style.backgroundColor="black",t.style.color="white"),i.addEventListener("click",(()=>{let t=document.getElementById("modal");t.style.display="flex";let l=document.createElement("div");l.classList.add("taskdescriptiondiv"),n.tasks[e].description?l.textContent=n.tasks[e].description:l.textContent="You don't have a description yet",t.appendChild(l),t.addEventListener("click",(()=>{t.removeChild(l),t.style.display="none"}))})),r.addEventListener("click",(()=>{n.tasks.splice(e,1),L(),g()})),c.addEventListener("click",(()=>{u=!0,document.getElementById("tasktitle").value=n.tasks[e].title,document.getElementById("taskdescription").value=n.tasks[e].description,document.getElementById("duedate").value=n.tasks[e].dueDate,document.getElementById("duetime").value=n.tasks[e].dueTime,document.getElementById("priority").value=n.tasks[e].priority,n.tasks.splice(e,1),k()})),d.addEventListener("click",(()=>{!1===n.tasks[e].checked?n.tasks[e].checked=!0:n.tasks[e].checked=!1,g(),L()}))}}}e.length>=2&&"Projects"===i&&x(),n=e[0],function(){i.appendChild(p);let t=document.getElementById("xmarkproj"),l=document.getElementById("xmarktask"),s=document.getElementById("xmarknote"),d=document.querySelectorAll(".navlink"),o=document.getElementById("addproject"),c=document.getElementById("addtask"),m=document.getElementById("addnote"),u=document.getElementById("newproject"),g=(document.getElementById("newtaskicon"),document.getElementById("projectslink"));o.addEventListener("click",I),c.addEventListener("click",f),m.addEventListener("click",C),u.addEventListener("click",y),p.addEventListener("click",(()=>{"Notes"===n?(r.style.display="flex",a.style.display="flex"):(document.getElementById("tasktitle").value="",document.getElementById("taskdescription").value="",document.getElementById("duedate").value="",document.getElementById("duetime").value="",document.getElementById("priority").value="",k())})),d.forEach((function(t){t.addEventListener("click",(t=>{i.textContent=t.target.textContent,"Today"===t.target.textContent?(n=e[0],i.appendChild(p)):"Week"===t.target.textContent?(n=e[1],i.appendChild(p)):"Projects"===t.target.textContent||"Notes"===t.target.textContent&&(n="Notes",i.appendChild(p),B()),L()}))})),g.addEventListener("click",x),t.addEventListener("click",E),l.addEventListener("click",h),s.addEventListener("click",v)}(),L()})();